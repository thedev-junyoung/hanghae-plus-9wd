# 🧭 정책 정의 (Policy.md)

## 1. 잔액 정책 (BalancePolicy)

- 최소 충전 금액은 1,000원 이상이어야 한다.
- 잔액은 음수가 될 수 없다.
- 금액 단위는 `long`(원 단위 정수)로 관리한다.

## 2. 상품 정책 (ProductPolicy)

- 상품은 출시일(releaseDate) 이후에만 주문 가능하다.
- 상품의 재고는 사이즈 별로 관리되어야 한다.
- 상품 상세 설명은 최대 500자 이하여야 한다.
- 상품의 재고가 없으면 주문할 수 없다.

## 3. 주문/결제 정책 (OrderPolicy)

- 주문 총 금액은 개별 상품 금액 × 수량의 합이다.
- 잔액이 부족하면 주문 결제는 실패해야 한다.
- 결제 시 재고가 동시에 차감되어야 하며, 재고가 부족한 경우 실패한다.
- 쿠폰이 있는 경우, 쿠폰 유효성을 검증하고 총 금액에 할인 적용 후 결제한다.

## 4. 쿠폰 정책 (CouponPolicy)

- 선착순 쿠폰은 발급 수량이 소진되면 더 이상 발급할 수 없다.
- 쿠폰은 1인당 1개까지만 사용할 수 있으며, 유효기간 내 사용해야 한다.
- 쿠폰이 적용된 주문은 결제 완료 후 쿠폰을 소모 처리해야 한다.

## 5. 인기 상품 정책 (PopularProductPolicy)

- 최근 3일간 판매된 상품을 기준으로 인기 상품을 선정한다.
- 판매량 기준 상위 5개 상품을 반환한다.